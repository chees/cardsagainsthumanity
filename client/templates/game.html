<template name="game">
  <div class="game">
    {{#if isSetup}}
      {{#unless currentUser}}
        <button data-role="login">Log in to join</button>
      {{/unless}}

      {{#if canJoin}}
        <button data-role="join">Join</button>
      {{/if}}

      {{#if hasEnoughPlayers}}
        {{#if isCreator}}
          <button data-role="start">Ohhhh yes we are ready to start!</button>
        {{else}}
          <div>Waiting for {{creatorName}} to start the game...</div>
        {{/if}}
      {{else}}
        <div>Waiting for more players to join...</div>
      {{/if}}
      <div class="players">
        Players:
        <ul>
          {{#each players}}
            <li>
              <img src="{{picture}}" class="userPicture">
              {{name}}
            </li>
          {{/each}}
        </ul>
      </div>
    {{/if}}

    <!--
    <div class="players">
      Players:
      <ul>
        {{#each players}}
          <li>
            <img src="{{picture}}" class="userPicture">
            {{name}} {{score}}
            {{#if selectedAnswer}}
              <i>answered</i>
            {{/if}}
          </li>
        {{/each}}
      </ul>
    </div>
    -->

    

    {{#if isAnswering}}
      <div class="question">{{question}}</div>
      {{#if isJoined}}
        {{#if hasAnswered}}
          <div class="waiting">
            Waiting for the other players...
          </div>
        {{/if}}
        {{>hand}}
      {{/if}}
    {{/if}}

    {{#if isSelectingWinner}}
      <div class="question">{{question}}</div>
      {{>answers}}
    {{/if}}
  </div>
</template>

<template name="answers">
  <div>
    Answers:
    <ul>
      {{#each selectedAnswers}}
        <li>
          {{#if isCzar ..}}
            <a href="#">{{this}}</a>
          {{else}}
            {{this}}
          {{/if}}
        </li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="hand">
  <div class="hand">
    <ul>
      {{#each answers}}
        <li>
          <a href="#">
            <span>{{this.answer}}</span>
          </a>
          <button class="{{clazz}}">Play this Card</button>
        </li>
      {{/each}}
    </ul>
  </div>
</template>
